/*!
 * bilibili_hkj v0.2.2 (http://keyfunc.github.io/bilibili_hkj)
 * Copyright 2012-2014 Key Dai
 * Licensed under MIT (http://github.com/keyfunc/bilibili_hkj/blob/master/LICENSE)
 */
(function(){var __slice=[].slice;!function(d,w){var blhkj_main,current_version,head,i,jQueryVersion,loadjQuery,normalModel,params,style,tip_panel,tpModel,v,version,_$,_i,_len,_v;if(params=/http:\/\/(www\.bilibili\.tv|bilibili\.kankanews\.com)\/video\/av([0-9]+)\/(?:index_([0-9]+)\.html)?/.exec(d.URL),tpModel=!params&&!!/http:\/\/(www\.bilibili\.tv|bilibili\.kankanews\.com)?/.exec(d.URL),head=d.getElementsByTagName("head")[0],style=d.createElement("style"),style.type="text/css",style.appendChild(d.createTextNode('#_tip_panel{position:fixed;right:16px;bottom:32px;z-index:100}#_tip_panel p{position:relative;background:rgba(0,0,0,.9);box-shadow:0 1px 2px rgba(0,0,0,.5);border-radius:2px;margin:10px 0px;padding:7px 10px 7px 5px;z-index:100}#_tip_panel p span{color:#FFF;display:block;padding-left:5px;border-left:5px solid #C00;font-family:"Segoe UI","Helvetica Neue",Helvetica,Arial,"Microsoft YaHei","STHeiti","SimSun",Sans-serif;font-size:12px;font-weight:bold;text-align:left;line-height:20px;z-index:100}')),head.appendChild(style),tip_panel=d.createElement("div"),tip_panel.id="_tip_panel",d.body.appendChild(tip_panel),!params&&!tpModel)return void(w.bilibili_hkj=function(){return __tips(tip_panel,5e3,"\u75f4\u841d\u8389, \u7231\u8150\u5973","\u63a7\u9501\u9aa8, \u604b\u767e\u5408")}());if(jQueryVersion="1.11.0",this.Loader={importJS:function(a,b,c){var e;return e=d.createElement("script"),e.type="text/javascript",e.onload=function(){return console.log("onLoad: "+a),void 0!==c?c():void 0},e.src=a,b.appendChild(e)}},loadjQuery=!0,void 0!==w.jQuery)for(version=jQueryVersion.split("."),current_version=$.fn.jquery.split("."),i=_i=0,_len=current_version.length;_len>_i;i=++_i){if(v=current_version[i],v=parseInt(v),_v=parseInt(version[i]),_v>v){_$=jQuery.noConflict(),console.log("jQuery version: "+_$.fn.jquery+" --> "+jQueryVersion),loadjQuery=!0;break}if(v>_v){loadjQuery=!1;break}loadjQuery=!1}return this.__tips=function(){var a,b,c,e,f,g,h,i;for(a=arguments[0],c=arguments[1],g=3<=arguments.length?__slice.call(arguments,2):[],b=d.createElement("p"),h=0,i=g.length;i>h;h++)f=g[h],e=d.createElement("span"),void 0!==typeof e.textContent?e.textContent=f:e.innerText=f,b.appendChild(e);return a.appendChild(b),__hidden(b,c)},this.__hidden=function(a,b){return setTimeout(function(){var b,c;return b=1,c=setInterval(function(){return b-=.01,a.style.opacity=b,0>b?(w.clearInterval(c),a.parentNode.removeChild(a)):void 0},20)},b)},normalModel=function(a){var b,c,e,f;b="http://api.bilibili.tv/view?type=json&appkey=12737ff7776f1ade&id="+a[2]+(void 0!==a[3]?"&page="+a[3]:""),f="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url=%22"+encodeURIComponent(b)+"%22&format=json&callback=cbfunc",c=d.getElementById("bofqi"),c.innerHTML="",__tips(tip_panel,5e3,"\u6210\u529f\u5e72\u6389\u539f\u5148\u7684\u64ad\u653e\u5668"),e=d.createElement("script"),e.setAttribute("src",f),e.onload=function(){return this.parentNode.removeChild(this),e=null},head.appendChild(e),w.bilibili_hkj=function(){return __tips(tip_panel,5e3,"\u6b63\u5728\u83b7\u53d6\u795e\u79d8\u4ee3\u7801")}()},blhkj_main=function(){return tpModel?($("a[href*='/video/av']").click(function(a){var b;return a.preventDefault(),params=/(\/video|video)\/av([0-9]+)?/.exec($(this).attr("href")),b=$(".z").first(),b.load("http://www.bilibili.tv/video/av877489/ .z:first",function(){return $(".cover_image",b).hide(),$(".tminfo span[typeof='v:Breadcrumb']",b).remove(),$(".tminfo time",b).remove(),$(".info h2").text("").attr("title",""),$(".common .comm img").attr("onclick",$(".common .comm img").attr("onclick").replace("877489",params[2])),Loader.importJS("http://interface.bilibili.cn/count?aid="+params[2],head),normalModel(params)})}),void(w.bilibili_hkj=function(){return __tips(tip_panel,5e3,"2P\u6a21\u5f0f\u521d\u59cb\u5316\u5b8c\u6210","\uff3c(\u30fb\u03c9\u30fb\uff3c)\u4e27\u5c38\uff01(\uff0f\u30fb\u03c9\u30fb)\uff0fbishi")}())):d.getElementById("bofqi_embed")||function(){var a,b,c;b=d.getElementsByTagName("iframe"),a=/https:\/\/secure\.bilibili\.tv\/secure,cid=([0-9]+)(?:&aid=([0-9]+))?/;for(c in b)if(a.exec(b[c].src))return!0;return!1}()?void(w.bilibili_hkj=function(){return __tips(tip_panel,5e3,"bilibili\u6ee1\u72b6\u6001\u4e2d","\uff3c(\u30fb\u03c9\u30fb\uff3c)\u4e27\u5c38\uff01(\uff0f\u30fb\u03c9\u30fb)\uff0fbishi")}()):normalModel(params)},this.cbfunc=function(){var iframe,info,onMessage;return info=arguments[0].query.results.json,void 0!==info.cid?(__tips(tip_panel,5e3,"\u83b7\u53d6\u795e\u79d8\u4ee3\u7801\u6210\u529f","\u795e\u79d8\u4ee3\u7801ID: "+info.cid),$(".info h2").text(info.title).attr("title",info.title),iframe=d.createElement("iframe"),iframe.height=482,iframe.width=950,iframe.src="https://secure.bilibili.tv/secure,cid="+info.cid+"&amp;aid="+params[2],iframe.setAttribute("class","player"),iframe.setAttribute("border",0),iframe.setAttribute("scrolling","no"),iframe.setAttribute("frameborder","no"),iframe.setAttribute("framespacing",0),bofqi.appendChild(iframe),w.postMessage?(onMessage=function(e){return"https://secure.bilibili.tv"===e.origin&&"secJS:"===e.data.substr(0,6)?eval(e.data.substr(6)):void 0},w.addEventListener?w.addEventListener("message",onMessage,!1):w.attachEvent&&w.attachEvent("onmessage",onMessage)):setInterval(function(){var evalCode;return(evalCode=__GetCookie("__secureJS"))?(__SetCookie("__secureJS",""),eval(evalCode)):void 0},1e3),w.bilibili_hkj=function(){return __tips(tip_panel,5e3,"Mission Completed","\u55f6\u54e9\u55f6\u54e9 - ( \u309c- \u309c)\u3064\u30ed  \u4e7e\u676f~")}()):(__tips(tip_panel,5e3,"\u975e\u5e38\u62b1\u6b49, bishi\u59e5\u7237\u4e0d\u80af\u7ed9\u795e\u79d8\u4ee3\u7801",'\u8981\u4e0d\u4f60\u543c\u4e00\u58f0"\u5175\u5e93\u5317"\u540e\u518d\u8bd5\u8bd5?'),w.bilibili_hkj=null)},loadjQuery?Loader.importJS("http://keyfunc.github.io/bilibili_hkj/assets/js/jquery-"+jQueryVersion+".min.js",head,blhkj_main):blhkj_main()}(document,window)}).call(this);
//# sourceMappingURL=heikeji.min.map