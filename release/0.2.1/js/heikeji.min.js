/*!
 * bilibili_hkj v0.2.1 (http://keyfunc.github.io/bilibili_hkj)
 * Copyright 2012-2014 Key Dai
 * Licensed under MIT (http://github.com/keyfunc/bilibili_hkj/blob/master/LICENSE)
 */
(function(){var __slice=[].slice;return window.bilibili_hkj=function(d,w){var api,bofqi,head,iframePlay,jsonp,style,tip_panel,url;return this.__tips=function(){var a,b,c,e,f,g,h;for(a=arguments[0],f=2<=arguments.length?__slice.call(arguments,1):[],b=d.createElement("p"),g=0,h=f.length;h>g;g++)e=f[g],c=d.createElement("span"),"undefined"!=typeof c.textContent?c.textContent=e:c.innerText=e,b.appendChild(c);return a.appendChild(b),__hidden(b,5e3)},this.__hidden=function(a,b){return setTimeout(function(){var b,c;return b=1,c=setInterval(function(){return b-=.01,a.style.opacity=b,0>b?(w.clearInterval(c),a.parentNode.removeChild(a)):void 0},20)},b)},this.cbfunc=function(){var iframe,info,onMessage;return info=arguments[0].query.results.json,void 0!==info.cid?(__tips(tip_panel,"\u83b7\u53d6\u795e\u79d8\u4ee3\u7801\u6210\u529f","\u795e\u79d8\u4ee3\u7801ID: "+info.cid),iframe=d.createElement("iframe"),iframe.height=482,iframe.width=950,iframe.src="https://secure.bilibili.tv/secure,cid="+info.cid+"&amp;aid="+params[2],iframe.setAttribute("class","player"),iframe.setAttribute("border",0),iframe.setAttribute("scrolling","no"),iframe.setAttribute("frameborder","no"),iframe.setAttribute("framespacing",0),bofqi.appendChild(iframe),w.postMessage?(onMessage=function(e){return"https://secure.bilibili.tv"===e.origin&&"secJS:"===e.data.substr(0,6)?eval(e.data.substr(6)):void 0},w.addEventListener?w.addEventListener("message",onMessage,!1):w.attachEvent&&w.attachEvent("onmessage",onMessage)):setInterval(function(){var evalCode;return(evalCode=__GetCookie("__secureJS"))?(__SetCookie("__secureJS",""),eval(evalCode)):void 0},1e3),w.bilibili_hkj=function(){return __tips(tip_panel,"Mission Completed","\u55f6\u54e9\u55f6\u54e9 - ( \u309c- \u309c)\u3064\u30ed  \u4e7e\u676f~")}()):(__tips(tip_panel,"\u975e\u5e38\u62b1\u6b49, bishi\u59e5\u7237\u4e0d\u80af\u7ed9\u795e\u79d8\u4ee3\u7801",'\u8981\u4e0d\u4f60\u543c\u4e00\u58f0"\u5175\u5e93\u5317"\u540e\u518d\u8bd5\u8bd5?'),w.bilibili_hkj=null)},head=d.getElementsByTagName("head")[0],style=d.createElement("style"),style.type="text/css",style.appendChild(d.createTextNode('#_tip_panel{position:fixed;right:16px;bottom:32px;z-index:100}#_tip_panel p{position:relative;background:rgba(0,0,0,.9);box-shadow:0 1px 2px rgba(0,0,0,.5);border-radius:2px;margin:10px 0px;padding:7px 10px 7px 5px;z-index:100}#_tip_panel p span{color:#FFF;display:block;padding-left:5px;border-left:5px solid #C00;font-family:"Segoe UI","Helvetica Neue",Helvetica,Arial,"Microsoft YaHei","STHeiti","SimSun",Sans-serif;font-size:12px;font-weight:bold;text-align:left;line-height:20px;z-index:100}')),head.appendChild(style),tip_panel=d.createElement("div"),tip_panel.id="_tip_panel",d.body.appendChild(tip_panel),this.params=/http:\/\/(www\.bilibili\.tv|bilibili\.kankanews\.com)\/video\/av([0-9]+)\/(?:index_([0-9]+)\.html)?/.exec(d.URL),iframePlay=/https:\/\/secure\.bilibili\.tv\/secure,cid=([0-9]+)(?:&aid=([0-9]+))?/,params?(api="http://api.bilibili.tv/view?type=json&appkey=12737ff7776f1ade&id="+params[2]+(void 0!==params[3]?"&page="+params[3]:""),url="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url=%22"+encodeURIComponent(api)+"%22&format=json&callback=cbfunc",d.getElementById("bofqi_embed")||function(){var a,b;a=d.getElementsByTagName("iframe");for(b in a)if(iframePlay.exec(a[b].src))return!0;return!1}()?function(){return __tips(tip_panel,"bilibili\u6ee1\u72b6\u6001\u4e2d","\uff3c(\u30fb\u03c9\u30fb\uff3c)\u4e27\u5c38\uff01(\uff0f\u30fb\u03c9\u30fb)\uff0fbishi")}:(bofqi=d.getElementById("bofqi"),bofqi.innerHTML="",__tips(tip_panel,"\u6210\u529f\u5e72\u6389\u539f\u5148\u7684\u64ad\u653e\u5668"),jsonp=d.createElement("script"),jsonp.setAttribute("src",url),jsonp.onload=function(){return this.parentNode.removeChild(this),jsonp=null},head.appendChild(jsonp),function(){return __tips(tip_panel,"\u6b63\u5728\u83b7\u53d6\u795e\u79d8\u4ee3\u7801")})):function(){return __tips(tip_panel,"\u626c\u5e06\u8fdc\u6d0b\u626b\u5e7f\u573a","\u6c11\u4e3b\u81ea\u7531\u4e0d\u53ef\u6321")}}(document,window)()}).call(this);
//# sourceMappingURL=heikeji.min.map